"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/public/prediction/route";
exports.ids = ["app/api/public/prediction/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpublic%2Fprediction%2Froute&page=%2Fapi%2Fpublic%2Fprediction%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpublic%2Fprediction%2Froute.ts&appDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpublic%2Fprediction%2Froute&page=%2Fapi%2Fpublic%2Fprediction%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpublic%2Fprediction%2Froute.ts&appDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Umuts_wotc_apps_admin_app_api_public_prediction_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/public/prediction/route.ts */ \"(rsc)/./app/api/public/prediction/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/public/prediction/route\",\n        pathname: \"/api/public/prediction\",\n        filename: \"route\",\n        bundlePath: \"app/api/public/prediction/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Umuts\\\\wotc\\\\apps\\\\admin\\\\app\\\\api\\\\public\\\\prediction\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Umuts_wotc_apps_admin_app_api_public_prediction_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/public/prediction/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGcHVibGljJTJGcHJlZGljdGlvbiUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHVibGljJTJGcHJlZGljdGlvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnB1YmxpYyUyRnByZWRpY3Rpb24lMkZyb3V0ZS50cyZhcHBEaXI9QyUzQSU1Q1VzZXJzJTVDVW11dHMlNUN3b3RjJTVDYXBwcyU1Q2FkbWluJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNVbXV0cyU1Q3dvdGMlNUNhcHBzJTVDYWRtaW4maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzJCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd290Yy1hZG1pbi8/OTAzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxVbXV0c1xcXFx3b3RjXFxcXGFwcHNcXFxcYWRtaW5cXFxcYXBwXFxcXGFwaVxcXFxwdWJsaWNcXFxccHJlZGljdGlvblxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHVibGljL3ByZWRpY3Rpb24vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wdWJsaWMvcHJlZGljdGlvblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHVibGljL3ByZWRpY3Rpb24vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxVbXV0c1xcXFx3b3RjXFxcXGFwcHNcXFxcYWRtaW5cXFxcYXBwXFxcXGFwaVxcXFxwdWJsaWNcXFxccHJlZGljdGlvblxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHVibGljL3ByZWRpY3Rpb24vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpublic%2Fprediction%2Froute&page=%2Fapi%2Fpublic%2Fprediction%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpublic%2Fprediction%2Froute.ts&appDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/public/prediction/route.ts":
/*!********************************************!*\
  !*** ./app/api/public/prediction/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/kv */ \"(rsc)/./lib/kv.ts\");\n\n\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const { deviceId, dateKey, matchId, step, resultPick, ouPick } = body;\n        if (!deviceId || !dateKey || !matchId || !step) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        // Initialize user if needed\n        let userState = await (0,_lib_kv__WEBPACK_IMPORTED_MODULE_1__.getUserState)(deviceId);\n        if (!userState) {\n            userState = await (0,_lib_kv__WEBPACK_IMPORTED_MODULE_1__.initializeUser)(deviceId);\n        }\n        // Get or create prediction entry for this date\n        if (!userState.predictions[dateKey]) {\n            userState.predictions[dateKey] = {};\n        }\n        const datePredictions = userState.predictions[dateKey];\n        if (!datePredictions[matchId]) {\n            datePredictions[matchId] = {\n                matchId\n            };\n        }\n        const prediction = datePredictions[matchId];\n        // Update based on step\n        if (step === 1) {\n            if (resultPick && [\n                \"1\",\n                \"X\",\n                \"2\"\n            ].includes(resultPick)) {\n                // Check if already predicted (optional: prevent double counting?)\n                // For simplicity and atomic speed, we assume the frontend prevents duplicates (which we did earlier).\n                // If a user changes their mind, we don't decrement the old one here (limitations of simple INCR).\n                // Given the flow, user can't change mind easily once submitted.\n                if (prediction.resultPick !== resultPick) {\n                    prediction.resultPick = resultPick;\n                    await (0,_lib_kv__WEBPACK_IMPORTED_MODULE_1__.incrementMatchStats)(matchId, resultPick);\n                }\n            }\n        } else if (step === 2) {\n            if (ouPick && [\n                \"over\",\n                \"under\"\n            ].includes(ouPick)) {\n                if (prediction.ouPick !== ouPick) {\n                    prediction.ouPick = ouPick;\n                    prediction.completedAt = Date.now(); // Mark as complete\n                    await (0,_lib_kv__WEBPACK_IMPORTED_MODULE_1__.incrementMatchStats)(matchId, ouPick);\n                }\n            }\n        }\n        // Save updated user state\n        await (0,_lib_kv__WEBPACK_IMPORTED_MODULE_1__.upsertUserState)(userState);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Save prediction error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3B1YmxpYy9wcmVkaWN0aW9uL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RDtBQUNzQztBQUd2RixlQUFlSyxLQUFLQyxHQUFnQjtJQUN2QyxJQUFJO1FBQ0EsTUFBTUMsT0FBTyxNQUFNRCxJQUFJRSxJQUFJO1FBQzNCLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxVQUFVLEVBQUVDLE1BQU0sRUFBRSxHQUFHUDtRQUVqRSxJQUFJLENBQUNFLFlBQVksQ0FBQ0MsV0FBVyxDQUFDQyxXQUFXLENBQUNDLE1BQU07WUFDNUMsT0FBT1oscURBQVlBLENBQUNRLElBQUksQ0FDcEI7Z0JBQUVPLE9BQU87WUFBMEIsR0FDbkM7Z0JBQUVDLFFBQVE7WUFBSTtRQUV0QjtRQUVBLDRCQUE0QjtRQUM1QixJQUFJQyxZQUFZLE1BQU1oQixxREFBWUEsQ0FBQ1E7UUFDbkMsSUFBSSxDQUFDUSxXQUFXO1lBQ1pBLFlBQVksTUFBTWQsdURBQWNBLENBQUNNO1FBQ3JDO1FBRUEsK0NBQStDO1FBQy9DLElBQUksQ0FBQ1EsVUFBVUMsV0FBVyxDQUFDUixRQUFRLEVBQUU7WUFDakNPLFVBQVVDLFdBQVcsQ0FBQ1IsUUFBUSxHQUFHLENBQUM7UUFDdEM7UUFFQSxNQUFNUyxrQkFBa0JGLFVBQVVDLFdBQVcsQ0FBQ1IsUUFBUTtRQUV0RCxJQUFJLENBQUNTLGVBQWUsQ0FBQ1IsUUFBUSxFQUFFO1lBQzNCUSxlQUFlLENBQUNSLFFBQVEsR0FBRztnQkFBRUE7WUFBUTtRQUN6QztRQUVBLE1BQU1TLGFBQWFELGVBQWUsQ0FBQ1IsUUFBUTtRQUUzQyx1QkFBdUI7UUFDdkIsSUFBSUMsU0FBUyxHQUFHO1lBQ1osSUFBSUMsY0FBYztnQkFBQztnQkFBSztnQkFBSzthQUFJLENBQUNRLFFBQVEsQ0FBQ1IsYUFBYTtnQkFDcEQsa0VBQWtFO2dCQUNsRSxzR0FBc0c7Z0JBQ3RHLGtHQUFrRztnQkFDbEcsZ0VBQWdFO2dCQUNoRSxJQUFJTyxXQUFXUCxVQUFVLEtBQUtBLFlBQVk7b0JBQ3RDTyxXQUFXUCxVQUFVLEdBQUdBO29CQUN4QixNQUFNVCw0REFBbUJBLENBQUNPLFNBQVNFO2dCQUN2QztZQUNKO1FBQ0osT0FBTyxJQUFJRCxTQUFTLEdBQUc7WUFDbkIsSUFBSUUsVUFBVTtnQkFBQztnQkFBUTthQUFRLENBQUNPLFFBQVEsQ0FBQ1AsU0FBUztnQkFDOUMsSUFBSU0sV0FBV04sTUFBTSxLQUFLQSxRQUFRO29CQUM5Qk0sV0FBV04sTUFBTSxHQUFHQTtvQkFDcEJNLFdBQVdFLFdBQVcsR0FBR0MsS0FBS0MsR0FBRyxJQUFJLG1CQUFtQjtvQkFDeEQsTUFBTXBCLDREQUFtQkEsQ0FBQ08sU0FBU0c7Z0JBQ3ZDO1lBQ0o7UUFDSjtRQUVBLDBCQUEwQjtRQUMxQixNQUFNWix3REFBZUEsQ0FBQ2U7UUFFdEIsT0FBT2pCLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFBRWlCLFNBQVM7UUFBSztJQUM3QyxFQUFFLE9BQU9WLE9BQU87UUFDWlcsUUFBUVgsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBT2YscURBQVlBLENBQUNRLElBQUksQ0FDcEI7WUFBRU8sT0FBTztRQUF3QixHQUNqQztZQUFFQyxRQUFRO1FBQUk7SUFFdEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3dvdGMtYWRtaW4vLi9hcHAvYXBpL3B1YmxpYy9wcmVkaWN0aW9uL3JvdXRlLnRzPzAwMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBnZXRVc2VyU3RhdGUsIHVwc2VydFVzZXJTdGF0ZSwgaW5pdGlhbGl6ZVVzZXIsIGluY3JlbWVudE1hdGNoU3RhdHMgfSBmcm9tIFwiQC9saWIva3ZcIjtcclxuaW1wb3J0IHR5cGUgeyBSZXN1bHRQaWNrLCBPVVBpY2ssIFVzZXJQcmVkaWN0aW9uIH0gZnJvbSBcIkAvbGliL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHsgZGV2aWNlSWQsIGRhdGVLZXksIG1hdGNoSWQsIHN0ZXAsIHJlc3VsdFBpY2ssIG91UGljayB9ID0gYm9keTtcclxuXHJcbiAgICAgICAgaWYgKCFkZXZpY2VJZCB8fCAhZGF0ZUtleSB8fCAhbWF0Y2hJZCB8fCAhc3RlcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB1c2VyIGlmIG5lZWRlZFxyXG4gICAgICAgIGxldCB1c2VyU3RhdGUgPSBhd2FpdCBnZXRVc2VyU3RhdGUoZGV2aWNlSWQpO1xyXG4gICAgICAgIGlmICghdXNlclN0YXRlKSB7XHJcbiAgICAgICAgICAgIHVzZXJTdGF0ZSA9IGF3YWl0IGluaXRpYWxpemVVc2VyKGRldmljZUlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBvciBjcmVhdGUgcHJlZGljdGlvbiBlbnRyeSBmb3IgdGhpcyBkYXRlXHJcbiAgICAgICAgaWYgKCF1c2VyU3RhdGUucHJlZGljdGlvbnNbZGF0ZUtleV0pIHtcclxuICAgICAgICAgICAgdXNlclN0YXRlLnByZWRpY3Rpb25zW2RhdGVLZXldID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRlUHJlZGljdGlvbnMgPSB1c2VyU3RhdGUucHJlZGljdGlvbnNbZGF0ZUtleV0gYXMgYW55O1xyXG5cclxuICAgICAgICBpZiAoIWRhdGVQcmVkaWN0aW9uc1ttYXRjaElkXSkge1xyXG4gICAgICAgICAgICBkYXRlUHJlZGljdGlvbnNbbWF0Y2hJZF0gPSB7IG1hdGNoSWQgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHByZWRpY3Rpb24gPSBkYXRlUHJlZGljdGlvbnNbbWF0Y2hJZF0gYXMgVXNlclByZWRpY3Rpb247XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBiYXNlZCBvbiBzdGVwXHJcbiAgICAgICAgaWYgKHN0ZXAgPT09IDEpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdFBpY2sgJiYgW1wiMVwiLCBcIlhcIiwgXCIyXCJdLmluY2x1ZGVzKHJlc3VsdFBpY2spKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbHJlYWR5IHByZWRpY3RlZCAob3B0aW9uYWw6IHByZXZlbnQgZG91YmxlIGNvdW50aW5nPylcclxuICAgICAgICAgICAgICAgIC8vIEZvciBzaW1wbGljaXR5IGFuZCBhdG9taWMgc3BlZWQsIHdlIGFzc3VtZSB0aGUgZnJvbnRlbmQgcHJldmVudHMgZHVwbGljYXRlcyAod2hpY2ggd2UgZGlkIGVhcmxpZXIpLlxyXG4gICAgICAgICAgICAgICAgLy8gSWYgYSB1c2VyIGNoYW5nZXMgdGhlaXIgbWluZCwgd2UgZG9uJ3QgZGVjcmVtZW50IHRoZSBvbGQgb25lIGhlcmUgKGxpbWl0YXRpb25zIG9mIHNpbXBsZSBJTkNSKS5cclxuICAgICAgICAgICAgICAgIC8vIEdpdmVuIHRoZSBmbG93LCB1c2VyIGNhbid0IGNoYW5nZSBtaW5kIGVhc2lseSBvbmNlIHN1Ym1pdHRlZC5cclxuICAgICAgICAgICAgICAgIGlmIChwcmVkaWN0aW9uLnJlc3VsdFBpY2sgIT09IHJlc3VsdFBpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVkaWN0aW9uLnJlc3VsdFBpY2sgPSByZXN1bHRQaWNrIGFzIFJlc3VsdFBpY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW5jcmVtZW50TWF0Y2hTdGF0cyhtYXRjaElkLCByZXN1bHRQaWNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc3RlcCA9PT0gMikge1xyXG4gICAgICAgICAgICBpZiAob3VQaWNrICYmIFtcIm92ZXJcIiwgXCJ1bmRlclwiXS5pbmNsdWRlcyhvdVBpY2spKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljdGlvbi5vdVBpY2sgIT09IG91UGljaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3Rpb24ub3VQaWNrID0gb3VQaWNrIGFzIE9VUGljaztcclxuICAgICAgICAgICAgICAgICAgICBwcmVkaWN0aW9uLmNvbXBsZXRlZEF0ID0gRGF0ZS5ub3coKTsgLy8gTWFyayBhcyBjb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGluY3JlbWVudE1hdGNoU3RhdHMobWF0Y2hJZCwgb3VQaWNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2F2ZSB1cGRhdGVkIHVzZXIgc3RhdGVcclxuICAgICAgICBhd2FpdCB1cHNlcnRVc2VyU3RhdGUodXNlclN0YXRlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlNhdmUgcHJlZGljdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRVc2VyU3RhdGUiLCJ1cHNlcnRVc2VyU3RhdGUiLCJpbml0aWFsaXplVXNlciIsImluY3JlbWVudE1hdGNoU3RhdHMiLCJQT1NUIiwicmVxIiwiYm9keSIsImpzb24iLCJkZXZpY2VJZCIsImRhdGVLZXkiLCJtYXRjaElkIiwic3RlcCIsInJlc3VsdFBpY2siLCJvdVBpY2siLCJlcnJvciIsInN0YXR1cyIsInVzZXJTdGF0ZSIsInByZWRpY3Rpb25zIiwiZGF0ZVByZWRpY3Rpb25zIiwicHJlZGljdGlvbiIsImluY2x1ZGVzIiwiY29tcGxldGVkQXQiLCJEYXRlIiwibm93Iiwic3VjY2VzcyIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/public/prediction/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/kv.ts":
/*!*******************!*\
  !*** ./lib/kv.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteMatch: () => (/* binding */ deleteMatch),\n/* harmony export */   deleteTeam: () => (/* binding */ deleteTeam),\n/* harmony export */   getAllDailySets: () => (/* binding */ getAllDailySets),\n/* harmony export */   getAllMatches: () => (/* binding */ getAllMatches),\n/* harmony export */   getDailySet: () => (/* binding */ getDailySet),\n/* harmony export */   getMatch: () => (/* binding */ getMatch),\n/* harmony export */   getMatchStats: () => (/* binding */ getMatchStats),\n/* harmony export */   getTeamById: () => (/* binding */ getTeamById),\n/* harmony export */   getTeams: () => (/* binding */ getTeams),\n/* harmony export */   getUserState: () => (/* binding */ getUserState),\n/* harmony export */   incrementMatchStats: () => (/* binding */ incrementMatchStats),\n/* harmony export */   initializeUser: () => (/* binding */ initializeUser),\n/* harmony export */   setTeams: () => (/* binding */ setTeams),\n/* harmony export */   upsertDailySet: () => (/* binding */ upsertDailySet),\n/* harmony export */   upsertMatch: () => (/* binding */ upsertMatch),\n/* harmony export */   upsertTeam: () => (/* binding */ upsertTeam),\n/* harmony export */   upsertUserState: () => (/* binding */ upsertUserState)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/../../node_modules/@vercel/kv/dist/index.js\");\n\n// ============= TEAMS =============\nasync function getTeams() {\n    const teams = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(\"teams\");\n    return teams || [];\n}\nasync function setTeams(teams) {\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.set(\"teams\", teams);\n}\nasync function getTeamById(id) {\n    const teams = await getTeams();\n    return teams.find((t)=>t.id === id) || null;\n}\nasync function upsertTeam(team) {\n    const teams = await getTeams();\n    const index = teams.findIndex((t)=>t.id === team.id);\n    if (index >= 0) {\n        teams[index] = {\n            ...team,\n            updatedAt: Date.now()\n        };\n    } else {\n        teams.push({\n            ...team,\n            updatedAt: Date.now()\n        });\n    }\n    await setTeams(teams);\n}\nasync function deleteTeam(id) {\n    const teams = await getTeams();\n    const filtered = teams.filter((t)=>t.id !== id);\n    await setTeams(filtered);\n}\n// ============= MATCHES =============\nasync function getMatch(matchId) {\n    return await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(`match:${matchId}`);\n}\nasync function getAllMatches() {\n    // Get all match keys\n    const keys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(\"match:*\");\n    if (keys.length === 0) return [];\n    // Fetch all matches\n    const matches = await Promise.all(keys.map((key)=>_vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(key)));\n    return matches.filter((m)=>m !== null);\n}\n// Helper to get next ID\nasync function getNextMatchId() {\n    const id = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.incr(\"match_id_counter\");\n    return id.toString();\n}\nasync function upsertMatch(matchData) {\n    // If no ID, generate sequential one\n    if (!matchData.id) {\n        matchData.id = await getNextMatchId();\n    }\n    const match = {\n        id: matchData.id,\n        homeTeamId: matchData.homeTeamId,\n        awayTeamId: matchData.awayTeamId,\n        league: matchData.league,\n        kickoffAt: matchData.kickoffAt,\n        status: matchData.status || \"draft\",\n        aiText: matchData.aiText || null,\n        stadium: matchData.stadium,\n        week: matchData.week || 1,\n        createdAt: Date.now(),\n        updatedAt: Date.now()\n    };\n    // Need to handle partial updates vs full replace\n    // For now, assume upsert provides all needed fields for new matches\n    // But for edits, we might overwrite fields if we are not careful.\n    // Let's fetch existing if we want to be safe, but the simplified version above\n    // assumes matchData has everything for new matches.\n    // For existing matches, we likely pass all fields anyway.\n    // Let's keep existing logic structure but ensuring ID\n    const existing = await getMatch(match.id);\n    const updated = {\n        ...existing,\n        ...match,\n        // Ensure ID is set\n        id: match.id,\n        // Use existing createdAt if available\n        createdAt: existing?.createdAt || Date.now(),\n        updatedAt: Date.now()\n    };\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.set(`match:${match.id}`, updated);\n    return updated;\n}\nasync function deleteMatch(matchId) {\n    // 1. Remove from all daily sets\n    const dailySets = await getAllDailySets();\n    for (const set of dailySets){\n        if (set.matchIds.includes(matchId)) {\n            const updatedMatchIds = set.matchIds.filter((id)=>id !== matchId);\n            // Only update if changed\n            if (updatedMatchIds.length !== set.matchIds.length) {\n                await upsertDailySet({\n                    ...set,\n                    matchIds: updatedMatchIds\n                });\n            }\n        }\n    }\n    // 2. Delete the match itself\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.del(`match:${matchId}`);\n}\n// ============= DAILY SETS =============\nasync function getDailySet(dateKey) {\n    return await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(`daily:${dateKey}`);\n}\nasync function upsertDailySet(dailySet) {\n    const updated = {\n        ...dailySet,\n        updatedAt: Date.now()\n    };\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.set(`daily:${dailySet.dateKey}`, updated);\n}\nasync function getAllDailySets() {\n    const keys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(\"daily:*\");\n    if (keys.length === 0) return [];\n    const sets = await Promise.all(keys.map((key)=>_vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(key)));\n    return sets.filter((s)=>s !== null);\n}\n// ============= USERS =============\nasync function getUserState(deviceId) {\n    return await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(`user:${deviceId}`);\n}\nasync function upsertUserState(userState) {\n    const existing = await getUserState(userState.deviceId);\n    const updated = {\n        ...userState,\n        createdAt: existing?.createdAt || Date.now(),\n        updatedAt: Date.now()\n    };\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.set(`user:${userState.deviceId}`, updated);\n}\n// Helper: Initialize user if not exists\nasync function initializeUser(deviceId) {\n    const existing = await getUserState(deviceId);\n    if (existing) return existing;\n    const newUser = {\n        deviceId,\n        tokens: 0,\n        predictions: {},\n        unlockedMatchIds: [],\n        createdAt: Date.now(),\n        updatedAt: Date.now()\n    };\n    await upsertUserState(newUser);\n    return newUser;\n}\nasync function getMatchStats(matchId) {\n    const stats = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.hgetall(`match_stats:${matchId}`);\n    return stats || {};\n}\nasync function incrementMatchStats(matchId, pick) {\n    // Atomic increment\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.hincrby(`match_stats:${matchId}`, pick, 1);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDZEMsa0JBQWtCLEVBQUU7UUFDcEJ4QixXQUFXL0IsS0FBS0MsR0FBRztRQUNuQkYsV0FBV0MsS0FBS0MsR0FBRztJQUN2QjtJQUVBLE1BQU1nRCxnQkFBZ0JHO0lBQ3RCLE9BQU9BO0FBQ1g7QUFZTyxlQUFlSSxjQUFjakQsT0FBZTtJQUMvQyxNQUFNa0QsUUFBUSxNQUFNeEUsMENBQUVBLENBQUN5RSxPQUFPLENBQWEsQ0FBQyxZQUFZLEVBQUVuRCxRQUFRLENBQUM7SUFDbkUsT0FBT2tELFNBQVMsQ0FBQztBQUNyQjtBQUVPLGVBQWVFLG9CQUFvQnBELE9BQWUsRUFBRXFELElBQVk7SUFDbkUsbUJBQW1CO0lBQ25CLE1BQU0zRSwwQ0FBRUEsQ0FBQzRFLE9BQU8sQ0FBQyxDQUFDLFlBQVksRUFBRXRELFFBQVEsQ0FBQyxFQUFFcUQsTUFBTTtBQUNyRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dvdGMtYWRtaW4vLi9saWIva3YudHM/ZWE0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBrdiB9IGZyb20gXCJAdmVyY2VsL2t2XCI7XHJcbmltcG9ydCB0eXBlIHsgVGVhbSwgTWF0Y2gsIERhaWx5U2V0LCBVc2VyU3RhdGUgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5cclxuLy8gPT09PT09PT09PT09PSBURUFNUyA9PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVhbXMoKTogUHJvbWlzZTxUZWFtW10+IHtcclxuICAgIGNvbnN0IHRlYW1zID0gYXdhaXQga3YuZ2V0PFRlYW1bXT4oXCJ0ZWFtc1wiKTtcclxuICAgIHJldHVybiB0ZWFtcyB8fCBbXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldFRlYW1zKHRlYW1zOiBUZWFtW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IGt2LnNldChcInRlYW1zXCIsIHRlYW1zKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRlYW1CeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFRlYW0gfCBudWxsPiB7XHJcbiAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IGdldFRlYW1zKCk7XHJcbiAgICByZXR1cm4gdGVhbXMuZmluZCgodCkgPT4gdC5pZCA9PT0gaWQpIHx8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cHNlcnRUZWFtKHRlYW06IFRlYW0pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHRlYW1zID0gYXdhaXQgZ2V0VGVhbXMoKTtcclxuICAgIGNvbnN0IGluZGV4ID0gdGVhbXMuZmluZEluZGV4KCh0KSA9PiB0LmlkID09PSB0ZWFtLmlkKTtcclxuXHJcbiAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgIHRlYW1zW2luZGV4XSA9IHsgLi4udGVhbSwgdXBkYXRlZEF0OiBEYXRlLm5vdygpIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRlYW1zLnB1c2goeyAuLi50ZWFtLCB1cGRhdGVkQXQ6IERhdGUubm93KCkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgc2V0VGVhbXModGVhbXMpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVGVhbShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IGdldFRlYW1zKCk7XHJcbiAgICBjb25zdCBmaWx0ZXJlZCA9IHRlYW1zLmZpbHRlcigodCkgPT4gdC5pZCAhPT0gaWQpO1xyXG4gICAgYXdhaXQgc2V0VGVhbXMoZmlsdGVyZWQpO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09IE1BVENIRVMgPT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1hdGNoKG1hdGNoSWQ6IHN0cmluZyk6IFByb21pc2U8TWF0Y2ggfCBudWxsPiB7XHJcbiAgICByZXR1cm4gYXdhaXQga3YuZ2V0PE1hdGNoPihgbWF0Y2g6JHttYXRjaElkfWApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWF0Y2hlcygpOiBQcm9taXNlPE1hdGNoW10+IHtcclxuICAgIC8vIEdldCBhbGwgbWF0Y2gga2V5c1xyXG4gICAgY29uc3Qga2V5cyA9IGF3YWl0IGt2LmtleXMoXCJtYXRjaDoqXCIpO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSByZXR1cm4gW107XHJcblxyXG4gICAgLy8gRmV0Y2ggYWxsIG1hdGNoZXNcclxuICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICBrZXlzLm1hcCgoa2V5KSA9PiBrdi5nZXQ8TWF0Y2g+KGtleSkpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBtYXRjaGVzLmZpbHRlcigobSk6IG0gaXMgTWF0Y2ggPT4gbSAhPT0gbnVsbCk7XHJcbn1cclxuXHJcbi8vIEhlbHBlciB0byBnZXQgbmV4dCBJRFxyXG5hc3luYyBmdW5jdGlvbiBnZXROZXh0TWF0Y2hJZCgpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgaWQgPSBhd2FpdCBrdi5pbmNyKFwibWF0Y2hfaWRfY291bnRlclwiKTtcclxuICAgIHJldHVybiBpZC50b1N0cmluZygpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0TWF0Y2gobWF0Y2hEYXRhOiBQYXJ0aWFsPE1hdGNoPik6IFByb21pc2U8TWF0Y2g+IHtcclxuICAgIC8vIElmIG5vIElELCBnZW5lcmF0ZSBzZXF1ZW50aWFsIG9uZVxyXG4gICAgaWYgKCFtYXRjaERhdGEuaWQpIHtcclxuICAgICAgICBtYXRjaERhdGEuaWQgPSBhd2FpdCBnZXROZXh0TWF0Y2hJZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1hdGNoOiBNYXRjaCA9IHtcclxuICAgICAgICBpZDogbWF0Y2hEYXRhLmlkLFxyXG4gICAgICAgIGhvbWVUZWFtSWQ6IG1hdGNoRGF0YS5ob21lVGVhbUlkISxcclxuICAgICAgICBhd2F5VGVhbUlkOiBtYXRjaERhdGEuYXdheVRlYW1JZCEsXHJcbiAgICAgICAgbGVhZ3VlOiBtYXRjaERhdGEubGVhZ3VlISxcclxuICAgICAgICBraWNrb2ZmQXQ6IG1hdGNoRGF0YS5raWNrb2ZmQXQhLFxyXG4gICAgICAgIHN0YXR1czogbWF0Y2hEYXRhLnN0YXR1cyB8fCBcImRyYWZ0XCIsXHJcbiAgICAgICAgYWlUZXh0OiBtYXRjaERhdGEuYWlUZXh0IHx8IG51bGwsXHJcbiAgICAgICAgc3RhZGl1bTogbWF0Y2hEYXRhLnN0YWRpdW0sXHJcbiAgICAgICAgd2VlazogbWF0Y2hEYXRhLndlZWsgfHwgMSwgLy8gRGVmYXVsdCB0byAxIGlmIG5vdCBwcm92aWRlZFxyXG4gICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE5lZWQgdG8gaGFuZGxlIHBhcnRpYWwgdXBkYXRlcyB2cyBmdWxsIHJlcGxhY2VcclxuICAgIC8vIEZvciBub3csIGFzc3VtZSB1cHNlcnQgcHJvdmlkZXMgYWxsIG5lZWRlZCBmaWVsZHMgZm9yIG5ldyBtYXRjaGVzXHJcbiAgICAvLyBCdXQgZm9yIGVkaXRzLCB3ZSBtaWdodCBvdmVyd3JpdGUgZmllbGRzIGlmIHdlIGFyZSBub3QgY2FyZWZ1bC5cclxuICAgIC8vIExldCdzIGZldGNoIGV4aXN0aW5nIGlmIHdlIHdhbnQgdG8gYmUgc2FmZSwgYnV0IHRoZSBzaW1wbGlmaWVkIHZlcnNpb24gYWJvdmVcclxuICAgIC8vIGFzc3VtZXMgbWF0Y2hEYXRhIGhhcyBldmVyeXRoaW5nIGZvciBuZXcgbWF0Y2hlcy5cclxuICAgIC8vIEZvciBleGlzdGluZyBtYXRjaGVzLCB3ZSBsaWtlbHkgcGFzcyBhbGwgZmllbGRzIGFueXdheS5cclxuXHJcbiAgICAvLyBMZXQncyBrZWVwIGV4aXN0aW5nIGxvZ2ljIHN0cnVjdHVyZSBidXQgZW5zdXJpbmcgSURcclxuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0TWF0Y2gobWF0Y2guaWQpO1xyXG5cclxuICAgIGNvbnN0IHVwZGF0ZWQ6IE1hdGNoID0ge1xyXG4gICAgICAgIC4uLmV4aXN0aW5nLFxyXG4gICAgICAgIC4uLm1hdGNoLFxyXG4gICAgICAgIC8vIEVuc3VyZSBJRCBpcyBzZXRcclxuICAgICAgICBpZDogbWF0Y2guaWQsXHJcbiAgICAgICAgLy8gVXNlIGV4aXN0aW5nIGNyZWF0ZWRBdCBpZiBhdmFpbGFibGVcclxuICAgICAgICBjcmVhdGVkQXQ6IGV4aXN0aW5nPy5jcmVhdGVkQXQgfHwgRGF0ZS5ub3coKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICB9O1xyXG5cclxuICAgIGF3YWl0IGt2LnNldChgbWF0Y2g6JHttYXRjaC5pZH1gLCB1cGRhdGVkKTtcclxuICAgIHJldHVybiB1cGRhdGVkO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlTWF0Y2gobWF0Y2hJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyAxLiBSZW1vdmUgZnJvbSBhbGwgZGFpbHkgc2V0c1xyXG4gICAgY29uc3QgZGFpbHlTZXRzID0gYXdhaXQgZ2V0QWxsRGFpbHlTZXRzKCk7XHJcbiAgICBmb3IgKGNvbnN0IHNldCBvZiBkYWlseVNldHMpIHtcclxuICAgICAgICBpZiAoc2V0Lm1hdGNoSWRzLmluY2x1ZGVzKG1hdGNoSWQpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRNYXRjaElkcyA9IHNldC5tYXRjaElkcy5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gbWF0Y2hJZCk7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIGNoYW5nZWRcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZWRNYXRjaElkcy5sZW5ndGggIT09IHNldC5tYXRjaElkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVwc2VydERhaWx5U2V0KHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5zZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hJZHM6IHVwZGF0ZWRNYXRjaElkcyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIDIuIERlbGV0ZSB0aGUgbWF0Y2ggaXRzZWxmXHJcbiAgICBhd2FpdCBrdi5kZWwoYG1hdGNoOiR7bWF0Y2hJZH1gKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PSBEQUlMWSBTRVRTID09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYWlseVNldChkYXRlS2V5OiBzdHJpbmcpOiBQcm9taXNlPERhaWx5U2V0IHwgbnVsbD4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IGt2LmdldDxEYWlseVNldD4oYGRhaWx5OiR7ZGF0ZUtleX1gKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwc2VydERhaWx5U2V0KGRhaWx5U2V0OiBEYWlseVNldCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgdXBkYXRlZDogRGFpbHlTZXQgPSB7XHJcbiAgICAgICAgLi4uZGFpbHlTZXQsXHJcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxyXG4gICAgfTtcclxuXHJcbiAgICBhd2FpdCBrdi5zZXQoYGRhaWx5OiR7ZGFpbHlTZXQuZGF0ZUtleX1gLCB1cGRhdGVkKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbERhaWx5U2V0cygpOiBQcm9taXNlPERhaWx5U2V0W10+IHtcclxuICAgIGNvbnN0IGtleXMgPSBhd2FpdCBrdi5rZXlzKFwiZGFpbHk6KlwiKTtcclxuICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xyXG5cclxuICAgIGNvbnN0IHNldHMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICBrZXlzLm1hcCgoa2V5KSA9PiBrdi5nZXQ8RGFpbHlTZXQ+KGtleSkpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBzZXRzLmZpbHRlcigocyk6IHMgaXMgRGFpbHlTZXQgPT4gcyAhPT0gbnVsbCk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT0gVVNFUlMgPT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJTdGF0ZShkZXZpY2VJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyU3RhdGUgfCBudWxsPiB7XHJcbiAgICByZXR1cm4gYXdhaXQga3YuZ2V0PFVzZXJTdGF0ZT4oYHVzZXI6JHtkZXZpY2VJZH1gKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwc2VydFVzZXJTdGF0ZSh1c2VyU3RhdGU6IFVzZXJTdGF0ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBnZXRVc2VyU3RhdGUodXNlclN0YXRlLmRldmljZUlkKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVkOiBVc2VyU3RhdGUgPSB7XHJcbiAgICAgICAgLi4udXNlclN0YXRlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogZXhpc3Rpbmc/LmNyZWF0ZWRBdCB8fCBEYXRlLm5vdygpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcclxuICAgIH07XHJcblxyXG4gICAgYXdhaXQga3Yuc2V0KGB1c2VyOiR7dXNlclN0YXRlLmRldmljZUlkfWAsIHVwZGF0ZWQpO1xyXG59XHJcblxyXG4vLyBIZWxwZXI6IEluaXRpYWxpemUgdXNlciBpZiBub3QgZXhpc3RzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplVXNlcihkZXZpY2VJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyU3RhdGU+IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0VXNlclN0YXRlKGRldmljZUlkKTtcclxuXHJcbiAgICBpZiAoZXhpc3RpbmcpIHJldHVybiBleGlzdGluZztcclxuXHJcbiAgICBjb25zdCBuZXdVc2VyOiBVc2VyU3RhdGUgPSB7XHJcbiAgICAgICAgZGV2aWNlSWQsXHJcbiAgICAgICAgdG9rZW5zOiAwLFxyXG4gICAgICAgIHByZWRpY3Rpb25zOiB7fSxcclxuICAgICAgICB1bmxvY2tlZE1hdGNoSWRzOiBbXSxcclxuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxyXG4gICAgfTtcclxuXHJcbiAgICBhd2FpdCB1cHNlcnRVc2VyU3RhdGUobmV3VXNlcik7XHJcbiAgICByZXR1cm4gbmV3VXNlcjtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PSBTVEFUUyA9PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgdHlwZSBNYXRjaFN0YXRzID0ge1xyXG4gICAgXCIxXCI/OiBudW1iZXI7XHJcbiAgICBcIlhcIj86IG51bWJlcjtcclxuICAgIFwiMlwiPzogbnVtYmVyO1xyXG4gICAgXCJvdmVyXCI/OiBudW1iZXI7XHJcbiAgICBcInVuZGVyXCI/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYXRjaFN0YXRzKG1hdGNoSWQ6IHN0cmluZyk6IFByb21pc2U8TWF0Y2hTdGF0cz4ge1xyXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBrdi5oZ2V0YWxsPE1hdGNoU3RhdHM+KGBtYXRjaF9zdGF0czoke21hdGNoSWR9YCk7XHJcbiAgICByZXR1cm4gc3RhdHMgfHwge307XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbmNyZW1lbnRNYXRjaFN0YXRzKG1hdGNoSWQ6IHN0cmluZywgcGljazogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyBBdG9taWMgaW5jcmVtZW50XHJcbiAgICBhd2FpdCBrdi5oaW5jcmJ5KGBtYXRjaF9zdGF0czoke21hdGNoSWR9YCwgcGljaywgMSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImt2IiwiZ2V0VGVhbXMiLCJ0ZWFtcyIsImdldCIsInNldFRlYW1zIiwic2V0IiwiZ2V0VGVhbUJ5SWQiLCJpZCIsImZpbmQiLCJ0IiwidXBzZXJ0VGVhbSIsInRlYW0iLCJpbmRleCIsImZpbmRJbmRleCIsInVwZGF0ZWRBdCIsIkRhdGUiLCJub3ciLCJwdXNoIiwiZGVsZXRlVGVhbSIsImZpbHRlcmVkIiwiZmlsdGVyIiwiZ2V0TWF0Y2giLCJtYXRjaElkIiwiZ2V0QWxsTWF0Y2hlcyIsImtleXMiLCJsZW5ndGgiLCJtYXRjaGVzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImtleSIsIm0iLCJnZXROZXh0TWF0Y2hJZCIsImluY3IiLCJ0b1N0cmluZyIsInVwc2VydE1hdGNoIiwibWF0Y2hEYXRhIiwibWF0Y2giLCJob21lVGVhbUlkIiwiYXdheVRlYW1JZCIsImxlYWd1ZSIsImtpY2tvZmZBdCIsInN0YXR1cyIsImFpVGV4dCIsInN0YWRpdW0iLCJ3ZWVrIiwiY3JlYXRlZEF0IiwiZXhpc3RpbmciLCJ1cGRhdGVkIiwiZGVsZXRlTWF0Y2giLCJkYWlseVNldHMiLCJnZXRBbGxEYWlseVNldHMiLCJtYXRjaElkcyIsImluY2x1ZGVzIiwidXBkYXRlZE1hdGNoSWRzIiwidXBzZXJ0RGFpbHlTZXQiLCJkZWwiLCJnZXREYWlseVNldCIsImRhdGVLZXkiLCJkYWlseVNldCIsInNldHMiLCJzIiwiZ2V0VXNlclN0YXRlIiwiZGV2aWNlSWQiLCJ1cHNlcnRVc2VyU3RhdGUiLCJ1c2VyU3RhdGUiLCJpbml0aWFsaXplVXNlciIsIm5ld1VzZXIiLCJ0b2tlbnMiLCJwcmVkaWN0aW9ucyIsInVubG9ja2VkTWF0Y2hJZHMiLCJnZXRNYXRjaFN0YXRzIiwic3RhdHMiLCJoZ2V0YWxsIiwiaW5jcmVtZW50TWF0Y2hTdGF0cyIsInBpY2siLCJoaW5jcmJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/kv.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@upstash","vendor-chunks/crypto-js","vendor-chunks/@vercel"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpublic%2Fprediction%2Froute&page=%2Fapi%2Fpublic%2Fprediction%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpublic%2Fprediction%2Froute.ts&appDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUmuts%5Cwotc%5Capps%5Cadmin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();